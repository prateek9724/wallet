(this["webpackJsonpwallet-fe"]=this["webpackJsonpwallet-fe"]||[]).push([[0],{233:function(e,t,n){},234:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),i=n.n(c),o=(n(233),n.p,n(234),n(261)),l=n(370),s=(n(235),n(19)),b=n(18),u=n(22),d=n(10),p=n(7),j=function(){var e=Object(u.a)(Object(b.a)().mark((function e(t){var n,a,r,c,i,o;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.endpoint,a=t.method,r=t.queryParams,c=t.body,e.prev=1,e.next=4,fetch("".concat(n,"?").concat(new URLSearchParams(r)),Object(s.a)({method:a,headers:{"Content-Type":"application/json"}},c?{body:JSON.stringify(c)}:{}));case 4:return i=e.sent,e.next=7,i.json();case 7:if(o=e.sent,i.ok){e.next=10;break}throw o;case 10:return e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(1),console.error("Error in api call",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),x=n(237),v=n(3);var h=function(){return Object(v.jsx)("div",{className:"loader",children:Object(v.jsx)(x.a,{})})},O=n(263),g=n(240),m=n(241),f=function(e){var t=e.message,n=e.onCloseCb,a=r.a.useState(!!t),c=Object(d.a)(a,2),i=c[0],o=c[1],l=function(){o(!1),null===n||void 0===n||n()};return Object(v.jsx)(O.a,{sx:{width:400},children:Object(v.jsx)(g.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:i,onClose:l,message:t,autoHideDuration:6e3,action:Object(v.jsx)(m.a,{color:"secondary",size:"small",onClick:l,children:"Ok"})})})},w=function(e){var t=e.onWalletCreateCb,n=Object(a.useState)({name:"",balance:""}),r=Object(d.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)({}),l=Object(d.a)(o,2),x=l[0],O=l[1],g=Object(a.useState)(!1),m=Object(d.a)(g,2),f=m[0],w=m[1],C=function(e,t){var n;"name"===e?n=t.trim()?null:"Wallet name is mandatory":"balance"===e&&t.trim()&&!/^(0|[1-9]\d*)?(\.\d+)?(?<=\d)$/.test(t.trim())&&(n="Please enter a valid amount greater than 0."),console.log(e,n),O((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(p.a)({},e,n))}))},y=function(e){var t=e.target,n=t.name,a=t.value;console.log(n,a),i((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(p.a)({},n,a))})),C(n,a)},S=function(){var e;for(var t in x)if(x[t])return!1;return!(null===c||void 0===c||null===(e=c.name)||void 0===e||!e.trim())||(C("name",null===c||void 0===c?void 0:c.name),!1)},k=function(){var e=Object(u.a)(Object(b.a)().mark((function e(n){var a;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),S()&&!f){e.next=3;break}return e.abrupt("return");case 3:return w(!0),e.prev=4,e.next=7,j({endpoint:"/api/v1/wallet/setup",method:"POST",body:{name:c.name.trim(),balance:c.balance?c.balance.trim():""}});case 7:a=e.sent,console.log("Create Wallet Response: ",a),t(a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("Error while creating wallet",e.t0),w(!1);case 16:return e.prev=16,e.finish(16);case 18:case"end":return e.stop()}}),e,null,[[4,12,16,18]])})));return function(t){return e.apply(this,arguments)}}();return f?Object(v.jsx)(h,{}):Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{children:[Object(v.jsxs)("div",{className:"input-group",children:[Object(v.jsx)("label",{htmlFor:"name",children:"Wallet Name:"}),Object(v.jsx)("input",{type:"text",id:"name",name:"name",value:null===c||void 0===c?void 0:c.name,onChange:function(e){return y(e)}}),(null===x||void 0===x?void 0:x.name)&&Object(v.jsx)("span",{className:"error",children:null===x||void 0===x?void 0:x.name})]}),Object(v.jsxs)("div",{className:"input-group",children:[Object(v.jsx)("label",{htmlFor:"balance",children:"Wallet Balance:"}),Object(v.jsx)("input",{type:"text",id:"balance",name:"balance",value:null===c||void 0===c?void 0:c.balance,onChange:function(e){return y(e)}}),(null===x||void 0===x?void 0:x.balance)&&Object(v.jsx)("span",{className:"error",children:null===x||void 0===x?void 0:x.balance})]}),Object(v.jsx)("button",{onClick:k,type:"button",children:"Create Wallet"})]})})},C=n(242),y=n(243);var S=function(e){var t=e.wallet;return Object(v.jsx)("div",{className:"card",children:Object(v.jsx)(C.a,{sx:{minWidth:275},children:Object(v.jsxs)(y.a,{children:[Object(v.jsxs)("div",{className:"cardContent",children:[Object(v.jsx)("h3",{children:"Name: "}),t.name]}),Object(v.jsxs)("div",{className:"cardContent",children:[Object(v.jsx)("h3",{children:"Balance: "}),t.balance]}),Object(v.jsxs)("div",{className:"cardContent",children:[Object(v.jsx)("h3",{children:"WalletId: "}),t.id]})]})})})},k=n(244),P=n(245),I=n(264);var N=function(e){var t=e.onSuccessTransactionCb,n=e.walletId,r=e.onFailureCb,c=Object(a.useState)({description:"",amount:"",type:"CREDIT"}),i=Object(d.a)(c,2),o=i[0],l=i[1],x=Object(a.useState)({}),O=Object(d.a)(x,2),g=O[0],m=O[1],f=Object(a.useState)(!1),w=Object(d.a)(f,2),C=w[0],y=w[1],S=function(e,t){var n;"amount"===e&&(t.trim()?t.trim()&&!/^(0|[1-9]\d*)?(\.\d+)?(?<=\d)$/.test(t.trim())&&(n="Please enter a valid amount greater than 0."):n="Amount is mandatory"),console.log(e,n),m((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(p.a)({},e,n))}))},N=function(e){var t=e.target,n=t.name,a=t.value;console.log(n,a),l((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(p.a)({},n,a))})),S(n,a)},T=function(){var e;for(var t in g)if(g[t])return!1;return!(null===o||void 0===o||null===(e=o.amount)||void 0===e||!e.trim())||(S("amount",null===o||void 0===o?void 0:o.amount),!1)},W=function(){var e=Object(u.a)(Object(b.a)().mark((function e(a){var c,i,s,u,d,p;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),T()&&!C){e.next=3;break}return e.abrupt("return");case 3:return y(!0),s={description:null===o||void 0===o||null===(c=o.description)||void 0===c?void 0:c.trim(),amount:"CREDIT"===(null===o||void 0===o?void 0:o.type)?null===o||void 0===o||null===(i=o.amount)||void 0===i?void 0:i.trim():"-".concat(null===o||void 0===o?void 0:o.amount.trim())},e.prev=5,e.next=8,j({endpoint:"/api/v1/wallet/transact/".concat(n),method:"POST",body:s});case 8:u=e.sent,l({description:"",amount:"",type:"CREDIT"}),null===t||void 0===t||t(null===u||void 0===u?void 0:u.balance,null===u||void 0===u?void 0:u.transactionId,null===s||void 0===s?void 0:s.amount),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(5),p=null!==(d=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==d?d:"Something went wrong please try again",console.error("Error in while performing transaction: ",e.t0,{}),r(p);case 18:return e.prev=18,y(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[5,13,18,21]])})));return function(t){return e.apply(this,arguments)}}();return C?Object(v.jsx)(h,{}):Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{children:[Object(v.jsx)("div",{className:"input-group",children:Object(v.jsxs)(k.a,{row:!0,"aria-labelledby":"demo-error-radios",name:"type",value:null===o||void 0===o?void 0:o.type,onChange:N,children:[Object(v.jsx)(P.a,{labelPlacement:"start",value:"CREDIT",control:Object(v.jsx)(I.a,{}),label:"Credit"}),Object(v.jsx)(P.a,{labelPlacement:"start",value:"DEBIT",control:Object(v.jsx)(I.a,{}),label:"Debit"})]})}),Object(v.jsxs)("div",{className:"input-group",children:[Object(v.jsx)("label",{htmlFor:"amount",children:"Amount:"}),Object(v.jsx)("input",{type:"text",id:"amount",name:"amount",value:null===o||void 0===o?void 0:o.amount,onChange:function(e){return N(e)}}),(null===g||void 0===g?void 0:g.amount)&&Object(v.jsx)("span",{className:"error",children:null===g||void 0===g?void 0:g.amount})]}),Object(v.jsxs)("div",{className:"input-group",children:[Object(v.jsx)("label",{htmlFor:"description",children:"Description(optional):"}),Object(v.jsx)("input",{type:"text",id:"description",name:"description",value:null===o||void 0===o?void 0:o.description,onChange:function(e){return N(e)}}),(null===g||void 0===g?void 0:g.description)&&Object(v.jsx)("span",{className:"error",children:null===g||void 0===g?void 0:g.description})]}),Object(v.jsx)("button",{onClick:W,type:"button",children:"CREDIT"===(null===o||void 0===o?void 0:o.type)?"Add to Wallet":"Pay from Wallet"})]})})},T=n(265),W=n(260),D=n(20),E=n(246),F=n(247),R=n(248),z=n(79),L=n(249),B=n(250),A=n(251),U=n(252),M=n(266),G=n(363),J=n(364),q=n(365),H=n(366),$=n(367),V=n(368),K=[{id:"date",label:"Date",cb:function(e){return new Date(e).toLocaleString()}},{id:"id",label:"Transaction Id",cb:function(e){return Object(v.jsxs)("div",{style:{display:"flex",width:"100%"},children:[" ",e.slice(e.length-7),Object(v.jsx)(G.a,{onClick:function(){return t=e,void navigator.clipboard.writeText(t);var t}})]})}},{id:"amount",label:"Amount"},{id:"balance",label:"Updated Balance"},{id:"status",label:"Status",cb:function(e){switch(e){case"COMPLETED":return Object(v.jsx)("div",{className:"greenIcon",children:Object(v.jsx)(J.a,{})});case"FAILED":return Object(v.jsx)("div",{className:"redIcon",children:Object(v.jsx)(q.a,{})});default:return null}}}],Q=function(e){var t=e.count,n=e.page,a=e.rowsPerPage,r=e.onChangePage;return Object(v.jsxs)(O.a,{sx:{flexShrink:0,ml:2.5},children:[Object(v.jsx)(E.a,{onClick:function(e){r(e,n-1)},disabled:0===n,"aria-label":"Previous page",children:Object(v.jsx)(H.a,{})}),Object(v.jsx)(E.a,{onClick:function(e){r(e,n+1)},disabled:t<a,"aria-label":"Next page",children:Object(v.jsx)($.a,{})})]})};function X(e){var t=e.walletId,n=Object(a.useState)(!1),r=Object(d.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)([]),l=Object(d.a)(o,2),s=l[0],p=l[1],x=Object(a.useState)(5),O=Object(d.a)(x,2),g=O[0],m=O[1],f=Object(a.useState)(0),w=Object(d.a)(f,2),C=w[0],y=w[1];Object(a.useEffect)((function(){S(C,g)}),[]);var S=function(){var e=Object(u.a)(Object(b.a)().mark((function e(n,a){var r;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(!0),e.next=4,j({endpoint:"/api/v1/wallet/transactions/",method:"GET",queryParams:{walletId:t,skip:n*a,limit:a}});case 4:r=e.sent,console.log("Transactions list: ",r),p(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error in getting the transactions list",e.t0,{});case 12:return e.prev=12,i(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[c&&Object(v.jsx)(h,{}),Object(v.jsx)("div",{className:"tableContainer",children:Object(v.jsxs)(R.a,{component:z.a,children:[Object(v.jsxs)(L.a,{children:[Object(v.jsx)(B.a,{children:Object(v.jsx)(A.a,{children:Object(v.jsx)(F.a,{colSpan:5,children:Object(v.jsxs)("div",{className:"downloadBtn",onClick:function(){var e=[["TransactionId","Date","Amount","Type","Updated Balance","Status"].join(",")],t=s.reduce((function(e,t){var n=t.id,a=t.date,r=t.amount,c=t.type,i=t.balance,o=t.status;return e.push([n,new Date(a).toLocaleDateString()+" "+new Date(a).toLocaleTimeString(),r,c,i,o].join(",")),e}),[]),n=new Blob([[].concat(e,Object(D.a)(t)).join("\n")],{type:"text/csv"}),a=document.createElement("a");a.download="transactions.csv",a.href=window.URL.createObjectURL(n);var r=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});a.dispatchEvent(r),a.remove()},children:[Object(v.jsx)(V.a,{}),Object(v.jsx)("span",{style:{"margin-left":"10px"},children:"CSV"})]})})})}),Object(v.jsx)(B.a,{children:Object(v.jsx)(A.a,{children:K.map((function(e){return Object(v.jsx)(F.a,{children:null===e||void 0===e?void 0:e.label})}))})}),Object(v.jsx)(U.a,{children:s.map((function(e){return Object(v.jsxs)(A.a,{children:[" ",(t=e,K.map((function(e){return Object(v.jsx)(F.a,{children:null!==e&&void 0!==e&&e.cb?null===e||void 0===e?void 0:e.cb(t[null===e||void 0===e?void 0:e.id]):t[null===e||void 0===e?void 0:e.id]})})))," "]});var t}))})]}),Object(v.jsx)(M.a,{rowsPerPageOptions:[5,10,25,50],component:"div",count:s.length,rowsPerPage:g,page:C,onChangePage:function(e,t){console.log("newPage: ",t),y(t),S(t,g)},onChangeRowsPerPage:function(e){console.log("rowsPerPage: ",Number.parseInt(e.target.value,10)),m(Number.parseInt(e.target.value,10)),y(0),S(0,Number.parseInt(e.target.value,10))},ActionsComponent:Q,labelRowsPerPage:"Transactions per page",labelDisplayedRows:function(e){var t=e.from,n=(e.to,e.count);e.page;return"".concat(t,"-").concat(t+n-1)}})]})})]})}var Y=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),i=Object(d.a)(c,2),o=i[0],l=i[1],p=Object(a.useState)(null),x=Object(d.a)(p,2),g=x[0],m=x[1],C=Object(a.useState)(0),y=Object(d.a)(C,2),k=y[0],P=y[1];Object(a.useEffect)((function(){var e=localStorage.getItem("walletId");e&&I(e)}),[]);var I=function(){var e=Object(u.a)(Object(b.a)().mark((function e(t){var n;return Object(b.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,e.next=4,j({endpoint:"/api/v1/wallet/".concat(t),method:"GET"});case 4:n=e.sent,l(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error while fetching Wallet",e.t0,{});case 11:return e.prev=11,r(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}();return n?Object(v.jsx)(h,{}):Object(v.jsxs)(v.Fragment,{children:[!(null!==o&&void 0!==o&&o.id)&&Object(v.jsx)(w,{onWalletCreateCb:function(e){localStorage.setItem("walletId",e.id),l(e),m("Wallet with name ".concat(e.name," is created with balance ").concat(e.balance))}}),o&&Object(v.jsx)("div",{className:"tabHeader",children:Object(v.jsx)(O.a,{sx:{width:400},children:Object(v.jsxs)(T.a,{value:k,onChange:function(e,t){P(t)},"aria-label":"basic tabs example",variant:"fullWidth",children:[Object(v.jsx)(W.a,{label:"Wallet"}),Object(v.jsx)(W.a,{label:"Transactions"})]})})}),o&&0===k&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S,{wallet:o}),Object(v.jsx)(N,{onSuccessTransactionCb:function(e,t,n){l((function(t){return Object(s.a)(Object(s.a)({},t),{},{balance:e})})),m("Wallet got ".concat(n>0?"credited":"debited"," by ").concat(Math.abs(n),". Transaction id is ").concat(t,". Updated Wallet balance is ").concat(e))},walletId:null===o||void 0===o?void 0:o.id,onFailureCb:function(e){m(e)}})]}),o&&1===k&&Object(v.jsx)(X,{walletId:o.id}),g&&Object(v.jsx)(f,{message:g,onCloseCb:function(){m(null)}})]})},Z=n(220),_=n(21),ee=Object(Z.a)({palette:{background:{default:"#F4F6F8",paper:_.a.common.white},primary:{contrastText:"#ffffff",main:"#5664d2"},text:{primary:"#172b4d",secondary:"#6b778c"}},shadow:["none","0 0 0 1px rgba(63,63,68,0.05), 0 1px 2px 0 rgba(63,63,68,0.15)","0 0 1px 0 rgba(0,0,0,0.31), 0 2px 2px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 5px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 8px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 9px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 10px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 11px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 12px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 13px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 14px 24px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 16px 28px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 18px 30px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 20px 32px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 22px 34px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 24px 36px -8px rgba(0,0,0,0.25)"],typography:{h1:{fontWeight:500,fontSize:35,letterSpacing:"-0.24px"},h2:{fontWeight:500,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:500,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}}}),te=n(369),ne=n(371),ae=Object(te.a)((function(){return Object(ne.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"#f4f6f8",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"}}})})),re=function(){return ae(),null};var ce=function(){return Object(v.jsxs)(l.a,{theme:ee,children:[Object(v.jsx)(re,{}),Object(v.jsx)(o.a,{disableGutters:!0,maxWidth:!1,children:Object(v.jsx)(Y,{})})]})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,373)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(ce,{})}),document.getElementById("root")),ie()}},[[262,1,2]]]);
//# sourceMappingURL=main.4521a044.chunk.js.map